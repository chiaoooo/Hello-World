name: Release

on:
  push:
    tags:
      - 'v*'  # e.g. v1.0.0、v2.1.3 都會觸發

jobs:
  deploy:
    name: Deploy to Production
    runs-on: ubuntu-latest
    environment: production  # 必須設定為 environment 才有手動審核
    needs: run-ci 

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Show tag name
        run: echo "Deploying release ${{ github.ref_name }}"

      - name: Simulate deployment
        run: echo "Production deployment logic would go here..."

      - name: Use secret
        run: echo "Deploy token is ${{ secrets.DEPLOY_TOKEN }}"
